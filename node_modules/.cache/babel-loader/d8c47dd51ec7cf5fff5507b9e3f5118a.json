{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\wonde\\\\Desktop\\\\react\\\\traiflix\\\\traiflix\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\wonde\\\\Desktop\\\\react\\\\traiflix\\\\traiflix\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\wonde\\\\Desktop\\\\react\\\\traiflix\\\\traiflix\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\wonde\\\\Desktop\\\\react\\\\traiflix\\\\traiflix\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\wonde\\\\Desktop\\\\react\\\\traiflix\\\\traiflix\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\wonde\\\\Desktop\\\\react\\\\traiflix\\\\traiflix\\\\src\\\\components\\\\search.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Modal from 'react-modal';\nimport { fetchPersonInfo, fetchPersonCredits, fetchVideoCredits } from '../store/actions/homepageActions';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport SearchCredits from './credits';\nvar img_url = 'https://image.tmdb.org/t/p/original';\nvar customStyles = {\n  content: {\n    top: '50%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)',\n    color: 'white',\n    background: '#080a0a none repeat scroll 0% 0%',\n    width: '600px'\n  }\n};\nModal.setAppElement('#root');\n\nvar SearchPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchPage, _Component);\n\n  function SearchPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SearchPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SearchPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      personId: '',\n      maxLength: 500,\n      read: 'Read More',\n      modalIsOpen: false,\n      modal: {\n        media_type: '',\n        id: '',\n        release_date: '',\n        first_air_date: '',\n        vote_average: '',\n        title: '',\n        name: ''\n      }\n    };\n\n    _this.componentDidUpdate = function () {\n      if (_this.props.results.length > 0 && _this.props.results[0].results[0] !== undefined && _this.state.personId !== _this.props.results[0].results[0].id) {\n        if (_this.props.results[0].results[0].media_type === 'person') {\n          _this.setState({\n            personId: _this.props.results[0].results[0].id,\n            read: 'Read More',\n            maxLength: 500\n          }, _this.props.fetchPersonInfo(_this.props.results[0].results[0].id), _this.props.fetchPersonCredits(_this.props.results[0].results[0].id));\n\n          _this.forceUpdate(console.log('force update'));\n        } else if (_this.props.results.length > 0 && _this.props.results[0].results[1] !== undefined && _this.state.personId !== _this.props.results[0].results[1].id) {\n          if (_this.props.results[0].results[1].media_type === 'person' && _this.props.results[0].results[1].popularity > 2) {\n            _this.setState({\n              personId: _this.props.results[0].results[1].id,\n              read: 'Read More',\n              maxLength: 500\n            }, _this.props.fetchPersonInfo(_this.props.results[0].results[1].id), _this.props.fetchPersonCredits(_this.props.results[0].results[1].id));\n\n            _this.forceUpdate(console.log('force update 2'));\n          }\n        } else if (_this.props.results.length > 0 && _this.props.results[0].results[2] !== undefined && _this.state.personId !== _this.props.results[0].results[2].id) {\n          if (_this.props.results[0].results[2] !== undefined && _this.props.results[0].results[2].media_type === 'person' && _this.props.results[0].results[2].popularity > 3) {\n            _this.setState({\n              personId: _this.props.results[0].results[2].id,\n              read: 'Read More',\n              maxLength: 500\n            }, _this.props.fetchPersonInfo(_this.props.results[0].results[2].id), _this.props.fetchPersonCredits(_this.props.results[0].results[2].id));\n\n            _this.forceUpdate(console.log('force update 3'));\n          }\n        }\n      }\n    };\n\n    _this.readMore = function () {\n      _this.setState({\n        maxLength: 10000,\n        read: ''\n      });\n    };\n\n    _this.failure = function () {\n      return React.createElement(\"div\", {\n        className: \".col-md-8 search-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"person-results failure\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"person-error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"Search failed, please try again\")));\n    };\n\n    _this.openModal = function (modal) {\n      _this.setState({\n        modalIsOpen: true,\n        modal: modal\n      });\n\n      _this.props.fetchVideoCredits(modal);\n    };\n\n    _this.afterOpenModal = function () {\n      _this.subtitle.style.color = '#f00';\n    };\n\n    _this.closeModal = function () {\n      _this.setState({\n        modalIsOpen: false,\n        modal: ''\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(SearchPage, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      //console.log(this.state.personId)\n      var results;\n      var person_results;\n      var person;\n\n      if (this.props.results[0] === undefined) {\n        return this.failure(console.log('Search Error 1'));\n      }\n\n      if (this.props.results[0].results[0] === undefined) {\n        return this.failure(console.log('Search Error 2'));\n      }\n\n      if (this.props.results[0].results[1] === undefined && this.props.results[0].results[0] === undefined) {\n        return this.failure(console.log('Search Error 3'));\n      }\n      /*else if(this.props.results[0].results[1].media_type === 'person' && this.props.results[0].results[1].popularity < 2 ){\r\n        return this.failure();\r\n      }*/\n\n\n      if (this.props.results[0].results[2] === undefined && this.props.results[0].results[1] === undefined && this.props.results[0].results[0] === undefined) {\n        return this.failure(console.log('Search Error 4'));\n      }\n\n      if (this.props.results[0].results[2] !== undefined && this.props.results[0].results[2].media_type === 'person' && this.props.results[0].results[0].popularity < 2 && this.props.results[0].results[2].popularity < 2) {\n        return this.failure(console.log('Search Error 5'));\n      }\n\n      if (this.props.results.length > 0 && this.props.results[0].results[0] !== undefined && this.props.results[0].results[0].media_type !== 'person' && this.props.results[0].results[1].media_type !== 'person' && this.props.results[0].results[2].media_type !== 'person') {\n        results = this.props.results[0].results.sort(function (a, b) {\n          return parseFloat(b.popularity) - parseFloat(a.popularity);\n        }).map(function (rs) {\n          if (rs.media_type === 'movie' && rs.poster_path !== null) {\n            return React.createElement(\"div\", {\n              className: \".col-md-4 search-container\",\n              key: rs.id,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 109\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"search-results\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 110\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"credit-block\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 111\n              },\n              __self: this\n            }, React.createElement(\"h5\", {\n              className: \"search-title\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 112\n              },\n              __self: this\n            }, rs.media_type === 'movie' ? rs.title : rs.name), React.createElement(\"p\", {\n              className: \"search-release\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 113\n              },\n              __self: this\n            }, \"Released: \".concat(rs.media_type === 'movie' ? rs.release_date : rs.first_air_date)), React.createElement(\"p\", {\n              className: \"search-vote\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 114\n              },\n              __self: this\n            }, \"Rating: \".concat(rs.vote_average))), React.createElement(FontAwesomeIcon, {\n              onClick: function onClick() {\n                return _this2.openModal(rs);\n              },\n              icon: \"plus-circle\",\n              className: \"SearchIcon\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 116\n              },\n              __self: this\n            }), React.createElement(\"div\", {\n              className: \"credit-modal\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 117\n              },\n              __self: this\n            }, React.createElement(\"img\", {\n              className: \"search-image\",\n              src: \"\".concat(img_url).concat(rs.poster_path),\n              alt: rs.media_type === 'movie' ? rs.title : rs.name,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 118\n              },\n              __self: this\n            }))));\n          }\n\n          if (rs.poster_path === '' || rs.backdrop_path === '' || rs.media_type === 'person') {\n            return React.createElement(\"div\", {\n              key: rs.id,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 124\n              },\n              __self: this\n            }, null);\n          }\n        });\n      }\n\n      if (this.props.results.length > 0) {\n        if (this.props.results[0].results[0] !== undefined || this.props.results[0].results[1] !== undefined || this.props.results[0].results[2] !== undefined) {\n          if (this.props.results[0].results[0].media_type === 'person' || this.props.results[0].results[1].media_type === 'person' || this.props.results[0].results[2].media_type === 'person') {\n            //onsole.log(this.props.results[0]);\n            person_results = this.props.results[0].results.map(function (pr) {\n              if (pr.profile_path !== null && pr.backdrop_path !== null && pr.media_type === 'person' && pr.popularity >= 3) {\n                return React.createElement(\"div\", {\n                  className: \".col-md-4 search-container\",\n                  key: pr.id,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 135\n                  },\n                  __self: this\n                }, React.createElement(\"div\", {\n                  className: \"search-results-person\",\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 136\n                  },\n                  __self: this\n                }, React.createElement(\"h5\", {\n                  className: \"search-title\",\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 137\n                  },\n                  __self: this\n                }, pr.name), React.createElement(\"img\", {\n                  className: \"search-image\",\n                  src: \"\".concat(img_url).concat(pr.profile_path),\n                  alt: pr.name,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 138\n                  },\n                  __self: this\n                })));\n              }\n            });\n          }\n        } else {\n          return React.createElement(\"div\", {\n            className: \"loading\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 147\n            },\n            __self: this\n          }, \"Loading...\");\n        }\n      }\n\n      if (this.props.person.length > 0) {\n        person = this.props.person.map(function (person) {\n          if (person.popularity >= 2) {\n            return React.createElement(\"div\", {\n              className: \".col-md-8 search-container\",\n              key: person.id,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 155\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"person-results\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 156\n              },\n              __self: this\n            }, React.createElement(\"p\", {\n              className: \"person-bio\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 157\n              },\n              __self: this\n            }, person.biography.length > 500 ? person.biography.substr(0, _this2.state.maxLength) : person.biography), person.biography.length > 520 ? React.createElement(\"p\", {\n              className: \"readmore\",\n              onClick: function onClick() {\n                _this2.readMore();\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 158\n              },\n              __self: this\n            }, _this2.state.read) : ''));\n          } else {\n            return React.createElement(\"div\", {\n              className: \".col-md-8 search-container\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 164\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"person-results\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 165\n              },\n              __self: this\n            }, React.createElement(\"p\", {\n              className: \"person-error\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 166\n              },\n              __self: this\n            }, \"Sorry could not find that\")));\n          }\n        });\n      }\n\n      var tmpId = this.props.videos.length > 0 && this.props.videos[0].length > 0 ? this.props.videos[0][0].key : [];\n      return React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, this.props.results.length > 0 && this.props.results[0].results[0].media_type !== 'person' ? results : person_results, this.props.results.length > 0 && this.props.results[1] !== undefined && this.props.results[0].results[1].media_type === 'person' ? person_results : '', this.props.results.length > 0 && this.props.results[2] !== undefined && this.props.results[0].results[2].media_type === 'person' ? person_results : '', this.props.results.length > 0 && this.props.results[0].results[0].media_type !== 'person' ? null : person, this.props.results.length > 0 && this.props.results[1] !== undefined && this.props.results[0].results[1].media_type === 'person' ? person : '', this.props.results.length > 0 && this.props.results[2] !== undefined && this.props.results[0].results[2].media_type === 'person' ? person : ''), this.props.results.length > 0 && this.props.results[0].results[0].media_type === 'person' ? React.createElement(SearchCredits, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }) : null, this.props.results.length > 0 && this.props.results[1] !== undefined && this.props.results[0].results[1].media_type === 'person' ? React.createElement(SearchCredits, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }) : '', this.props.results.length > 0 && this.props.results[2] !== undefined && this.props.results[0].results[2].media_type === 'person' ? React.createElement(SearchCredits, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }) : '', React.createElement(Modal, {\n        isOpen: this.state.modalIsOpen,\n        onAfterOpen: this.afterOpenModal,\n        onRequestClose: this.closeModal,\n        style: customStyles,\n        contentLabel: \"Search modal\",\n        className: \"modal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        ref: function ref(subtitle) {\n          return _this2.subtitle = subtitle;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, this.state.modal.media_type === 'tv' ? this.state.modal.name : this.state.modal.title), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Id: \", this.state.modal.id), React.createElement(\"h5\", {\n        className: \"modalRelease\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, \"Released: \", this.state.modal.media_type === 'tv' ? this.state.modal.first_air_date : this.state.modal.release_date), React.createElement(\"h5\", {\n        className: \"modalVote\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"Rating: \", this.state.modal.vote_average), tmpId.length > 0 ? React.createElement(\"iframe\", {\n        width: \"560\",\n        height: \"315\",\n        src: \"https://www.youtube.com/embed/\".concat(tmpId),\n        frameBorder: \"0\",\n        title: \"youtube\",\n        allow: \"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture;\",\n        allowFullScreen: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }) : React.createElement(\"p\", {\n        className: \"no-video\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, \"No video was found...\")), React.createElement(\"button\", {\n        className: \"modalClose\",\n        onClick: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"X\")));\n    }\n  }]);\n\n  return SearchPage;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    results: state.movTv.results,\n    person: state.movTv.personInfo,\n    videos: state.movTv.creditVid\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchPersonInfo: fetchPersonInfo,\n  fetchPersonCredits: fetchPersonCredits,\n  fetchVideoCredits: fetchVideoCredits\n})(SearchPage);","map":{"version":3,"sources":["C:\\Users\\wonde\\Desktop\\react\\traiflix\\traiflix\\src\\components\\search.js"],"names":["React","Component","connect","Modal","fetchPersonInfo","fetchPersonCredits","fetchVideoCredits","FontAwesomeIcon","SearchCredits","img_url","customStyles","content","top","left","right","bottom","marginRight","transform","color","background","width","setAppElement","SearchPage","state","personId","maxLength","read","modalIsOpen","modal","media_type","id","release_date","first_air_date","vote_average","title","name","componentDidUpdate","props","results","length","undefined","setState","forceUpdate","console","log","popularity","readMore","failure","openModal","afterOpenModal","subtitle","style","closeModal","person_results","person","sort","a","b","parseFloat","map","rs","poster_path","backdrop_path","pr","profile_path","biography","substr","tmpId","videos","key","mapStateToProps","movTv","personInfo","creditVid"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Modal from 'react-modal';\r\n\r\nimport { fetchPersonInfo, fetchPersonCredits, fetchVideoCredits } from '../store/actions/homepageActions';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nimport SearchCredits from './credits';\r\n\r\nconst img_url = 'https://image.tmdb.org/t/p/original';\r\n\r\nconst customStyles = {\r\n    content : {\r\n      top                   : '50%',\r\n      left                  : '50%',\r\n      right                 : 'auto',\r\n      bottom                : 'auto',\r\n      marginRight           : '-50%',\r\n      transform             : 'translate(-50%, -50%)',\r\n      color                 : 'white',\r\n      background            : '#080a0a none repeat scroll 0% 0%',\r\n      width                 : '600px',\r\n    }\r\n};\r\n\r\nModal.setAppElement('#root')\r\n\r\nclass SearchPage extends Component {\r\n    \r\n    state = {\r\n        personId: '',\r\n        maxLength: 500,\r\n        read: 'Read More',\r\n        modalIsOpen: false,\r\n        modal: {\r\n            media_type: '', id: '', release_date: '', first_air_date: '', vote_average: '', title: '', name: ''\r\n        }\r\n    }\r\n\r\n    componentDidUpdate = () => {\r\n        if(this.props.results.length > 0 && this.props.results[0].results[0] !== undefined && this.state.personId !== this.props.results[0].results[0].id){\r\n            if(this.props.results[0].results[0].media_type === 'person'){\r\n                this.setState({personId: this.props.results[0].results[0].id, read: 'Read More', maxLength: 500}, this.props.fetchPersonInfo(this.props.results[0].results[0].id), this.props.fetchPersonCredits(this.props.results[0].results[0].id));\r\n                this.forceUpdate(console.log('force update'));\r\n            } else if(this.props.results.length > 0 && this.props.results[0].results[1] !== undefined && this.state.personId !== this.props.results[0].results[1].id){\r\n            if(this.props.results[0].results[1].media_type === 'person' && this.props.results[0].results[1].popularity > 2){\r\n                this.setState({personId: this.props.results[0].results[1].id, read: 'Read More', maxLength: 500}, this.props.fetchPersonInfo(this.props.results[0].results[1].id), this.props.fetchPersonCredits(this.props.results[0].results[1].id));\r\n                this.forceUpdate(console.log('force update 2'));\r\n            } } else if(this.props.results.length > 0 && this.props.results[0].results[2] !== undefined && this.state.personId !== this.props.results[0].results[2].id){\r\n            if(this.props.results[0].results[2] !== undefined && this.props.results[0].results[2].media_type === 'person' && this.props.results[0].results[2].popularity > 3){\r\n                this.setState({personId: this.props.results[0].results[2].id, read: 'Read More', maxLength: 500}, this.props.fetchPersonInfo(this.props.results[0].results[2].id), this.props.fetchPersonCredits(this.props.results[0].results[2].id));\r\n                this.forceUpdate(console.log('force update 3'));\r\n            } }\r\n        }\r\n    }\r\n\r\n    readMore = () => {\r\n        this.setState({maxLength: 10000, read: ''});\r\n    }\r\n\r\n    failure = () => {\r\n        return (\r\n            <div className='.col-md-8 search-container'>\r\n                <div className='person-results failure'>\r\n                    <p className='person-error'>{`Search failed, please try again`}</p>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    openModal = (modal) => {\r\n        this.setState({ modalIsOpen: true, modal: modal})\r\n        this.props.fetchVideoCredits(modal);\r\n    }\r\n\r\n    afterOpenModal = () => {\r\n        this.subtitle.style.color = '#f00';\r\n    }\r\n\r\n    closeModal = () => {\r\n        this.setState({ modalIsOpen: false, modal: ''});\r\n    }\r\n    \r\n\r\n    render(){\r\n    //console.log(this.state.personId)\r\n    let results;\r\n    let person_results;\r\n    let person;\r\n            if(this.props.results[0] === undefined){\r\n                return this.failure(console.log('Search Error 1'));\r\n            } if (this.props.results[0].results[0] === undefined ){\r\n                return this.failure(console.log('Search Error 2'));\r\n            }if(this.props.results[0].results[1] === undefined && this.props.results[0].results[0] === undefined) {\r\n                return this.failure(console.log('Search Error 3'));\r\n            } /*else if(this.props.results[0].results[1].media_type === 'person' && this.props.results[0].results[1].popularity < 2 ){\r\n                return this.failure();\r\n            }*/if (this.props.results[0].results[2] === undefined && this.props.results[0].results[1] === undefined && this.props.results[0].results[0] === undefined){\r\n                return this.failure(console.log('Search Error 4'));\r\n            }if (this.props.results[0].results[2] !== undefined && this.props.results[0].results[2].media_type === 'person' && this.props.results[0].results[0].popularity < 2 && this.props.results[0].results[2].popularity < 2){\r\n                return this.failure(console.log('Search Error 5'));\r\n            }\r\n        if(this.props.results.length > 0 && this.props.results[0].results[0] !== undefined && this.props.results[0].results[0].media_type !== 'person' && this.props.results[0].results[1].media_type !== 'person' && this.props.results[0].results[2].media_type !== 'person'){\r\n            results = this.props.results[0].results.sort((a, b) => parseFloat(b.popularity) - parseFloat(a.popularity)).map(rs => {\r\n                if(rs.media_type === 'movie' && rs.poster_path !== null){\r\n                    return (\r\n                        <div className='.col-md-4 search-container' key={rs.id}>\r\n                            <div className='search-results'>\r\n                                <div className='credit-block'>\r\n                                    <h5 className='search-title'>{rs.media_type === 'movie' ? rs.title : rs.name}</h5>\r\n                                    <p className='search-release'>{`Released: ${rs.media_type === 'movie' ? rs.release_date: rs.first_air_date}`}</p>\r\n                                    <p className='search-vote'>{`Rating: ${rs.vote_average}`}</p>\r\n                                </div>\r\n                                <FontAwesomeIcon onClick={() => this.openModal(rs)} icon=\"plus-circle\" className='SearchIcon' />\r\n                                <div className='credit-modal'>\r\n                                    <img className='search-image' src={`${img_url}${rs.poster_path}`} alt={rs.media_type === 'movie' ? rs.title : rs.name} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                if (rs.poster_path === '' || rs.backdrop_path === '' || rs.media_type === 'person'){\r\n                        return (<div key={rs.id}>{null}</div>);}\r\n            } \r\n            )\r\n        }\r\n            if (this.props.results.length > 0 ){\r\n                if(this.props.results[0].results[0] !== undefined || this.props.results[0].results[1] !== undefined || this.props.results[0].results[2] !== undefined){\r\n                if (this.props.results[0].results[0].media_type === 'person' || this.props.results[0].results[1].media_type === 'person' || this.props.results[0].results[2].media_type === 'person'){\r\n                    //onsole.log(this.props.results[0]);\r\n                    person_results = this.props.results[0].results.map(pr => {\r\n                    if(pr.profile_path !== null && pr.backdrop_path !== null && pr.media_type === 'person' && pr.popularity >= 3){\r\n                    return (\r\n                        <div className='.col-md-4 search-container' key={pr.id}>\r\n                                <div className='search-results-person'>\r\n                                    <h5 className='search-title'>{pr.name}</h5>\r\n                                    <img className='search-image' src={`${img_url}${pr.profile_path}`} alt={pr.name} />\r\n                                </div>\r\n                        </div>\r\n                    )\r\n                }\r\n                }\r\n                )\r\n            } \r\n            } else {\r\n                    return <div className='loading'>Loading...</div>\r\n                }\r\n            }\r\n\r\n        if (this.props.person.length > 0){\r\n            person = this.props.person.map(person => {\r\n                if(person.popularity >= 2){\r\n                return (\r\n                    <div className='.col-md-8 search-container' key={person.id}>\r\n                        <div className='person-results'>\r\n                            <p className='person-bio'>{person.biography.length > 500 ? person.biography.substr(0, this.state.maxLength) : person.biography}</p>\r\n                            {person.biography.length > 520 ? <p className='readmore' onClick={() => {this.readMore()}}>{this.state.read}</p> : ''}\r\n                        </div>\r\n                    </div>\r\n                )\r\n            } else {\r\n                return (\r\n                    <div className='.col-md-8 search-container'>\r\n                        <div className='person-results'>\r\n                            <p className='person-error'>{`Sorry could not find that`}</p>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n            })\r\n        }\r\n\r\n        let tmpId = (this.props.videos.length > 0 && this.props.videos[0].length > 0) ? this.props.videos[0][0].key : [];\r\n\r\n            return (\r\n                <div className='container-fluid'>\r\n                        <div className='row'>\r\n                                {(this.props.results.length > 0 && this.props.results[0].results[0].media_type !== 'person')? results : person_results}\r\n                                {(this.props.results.length > 0 && this.props.results[1] !== undefined && this.props.results[0].results[1].media_type === 'person')? person_results : ''}\r\n                                {(this.props.results.length > 0 && this.props.results[2] !== undefined && this.props.results[0].results[2].media_type === 'person')? person_results : ''}\r\n                                {(this.props.results.length > 0 && this.props.results[0].results[0].media_type !== 'person') ? null : person}\r\n                                {(this.props.results.length > 0 && this.props.results[1] !== undefined && this.props.results[0].results[1].media_type === 'person')? person : ''}\r\n                                {(this.props.results.length > 0 && this.props.results[2] !== undefined && this.props.results[0].results[2].media_type === 'person')? person : ''}\r\n                        </div>\r\n                                {(this.props.results.length > 0 && this.props.results[0].results[0].media_type === 'person') ? <SearchCredits /> : null}\r\n                                {(this.props.results.length > 0 && this.props.results[1] !== undefined && this.props.results[0].results[1].media_type === 'person') ? <SearchCredits /> : ''}\r\n                                {(this.props.results.length > 0 && this.props.results[2] !== undefined && this.props.results[0].results[2].media_type === 'person' )? <SearchCredits /> : ''}\r\n                                <Modal\r\n                                isOpen={this.state.modalIsOpen}\r\n                                onAfterOpen={this.afterOpenModal}\r\n                                onRequestClose={this.closeModal}\r\n                                style={customStyles}\r\n                                contentLabel='Search modal'\r\n                                className='modal'\r\n                                >\r\n                                <h2 ref={subtitle => this.subtitle = subtitle}>{this.state.modal.media_type === 'tv' ? this.state.modal.name : this.state.modal.title}</h2>\r\n                                    <div>\r\n                                    <p>Id: {this.state.modal.id}</p>\r\n                                    <h5 className='modalRelease'>Released: {this.state.modal.media_type === 'tv' ? this.state.modal.first_air_date : this.state.modal.release_date}</h5>\r\n                                    <h5 className='modalVote'>Rating: {this.state.modal.vote_average}</h5>\r\n                                    {tmpId.length > 0 ? <iframe width=\"560\" height=\"315\" src={`https://www.youtube.com/embed/${tmpId}`} frameBorder=\"0\" title='youtube' allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture;\" allowFullScreen></iframe> : <p className='no-video'>No video was found...</p>}\r\n                                    </div>\r\n                                <button className='modalClose' onClick={this.closeModal}>X</button>\r\n                                </Modal>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        results: state.movTv.results,\r\n        person: state.movTv.personInfo,\r\n        videos: state.movTv.creditVid\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, { fetchPersonInfo, fetchPersonCredits, fetchVideoCredits })(SearchPage);"]},"metadata":{},"sourceType":"module"}